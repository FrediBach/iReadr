(function(){function r(a,b){var c=this,e=document,d;c.wrapper=typeof a=="object"?a:e.getElementById(a);c.wrapper.style.overflow="hidden";c.scroller=c.wrapper.children[0];c.options={HWTransition:!0,HWCompositing:!0,hScroll:!0,vScroll:!0,hScrollbar:!0,vScrollbar:!0,fixedScrollbar:x,fadeScrollbar:u&&n||!i,hideScrollbar:u||!i,scrollbarClass:"",bounce:n,bounceLock:!1,momentum:n,lockDirection:!0,zoom:!1,zoomMin:1,zoomMax:4,snap:!1,pullToRefresh:!1,pullDownLabel:["Pull down to refresh...","Release to refresh...",
"Loading..."],pullUpLabel:["Pull up to refresh...","Release to refresh...","Loading..."],onPullDown:function(){},onPullUp:function(){},onScrollStart:null,onScrollEnd:null,onZoomStart:null,onZoomEnd:null,checkDOMChange:!1};for(d in b)c.options[d]=b[d];c.options.HWCompositing=c.options.HWCompositing&&v;c.options.HWTransition=c.options.HWTransition&&v;c.scroller.style.cssText+=c.options.HWCompositing?"-webkit-transition-property:-webkit-transform;-webkit-transform-origin:0 0;-webkit-transform:"+k+"0,0"+
m:"-webkit-transition-property:top,left;-webkit-transform-origin:0 0;top:0;left:0";c.options.HWTransition&&(c.scroller.style.cssText+="-webkit-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);-webkit-transition-duration:0;");c.options.hScrollbar=c.options.hScroll&&c.options.hScrollbar;c.options.vScrollbar=c.options.vScroll&&c.options.vScrollbar;c.pullDownToRefresh=c.options.pullToRefresh=="down"||c.options.pullToRefresh=="both";c.pullUpToRefresh=c.options.pullToRefresh=="up"||c.options.pullToRefresh==
"both";if(c.pullDownToRefresh)d=e.createElement("div"),d.className="iScrollPullDown",d.innerHTML='<span class="iScrollPullDownIcon"></span><span class="iScrollPullDownLabel">'+c.options.pullDownLabel[0]+"</span>\n",c.scroller.insertBefore(d,c.scroller.children[0]),c.options.bounce=!0,c.pullDownEl=d,c.pullDownLabel=d.getElementsByTagName("span")[1];if(c.pullUpToRefresh)d=e.createElement("div"),d.className="iScrollPullUp",d.innerHTML='<span class="iScrollPullUpIcon"></span><span class="iScrollPullUpLabel">'+
c.options.pullUpLabel[0]+"</span>\n",c.scroller.appendChild(d),c.options.bounce=!0,c.pullUpEl=d,c.pullUpLabel=d.getElementsByTagName("span")[1];c.refresh();c._bind(s,window);c._bind(t);w&&c.options.zoom&&(c._bind("gesturestart"),c.scroller.style.webkitTransform+=" scale(1)");i||c._bind("mousewheel");if(c.options.checkDOMChange)c.DOMChangeInterval=setInterval(function(){c._checkSize()},250)}r.prototype={x:0,y:0,currPageX:0,currPageY:0,pagesX:[],pagesY:[],offsetBottom:0,offsetTop:0,scale:1,lastScale:1,
contentReady:!0,handleEvent:function(a){switch(a.type){case t:this._start(a);break;case o:this._move(a);break;case p:case q:this._end(a);break;case "webkitTransitionEnd":this._transitionEnd(a);break;case s:this._resize();break;case "gesturestart":this._gestStart(a);break;case "gesturechange":this._gestChange(a);break;case "gestureend":case "gesturecancel":this._gestEnd(a);break;case "mousewheel":this._wheel(a)}},_scrollbar:function(a){var b=document,c;if(this[a+"Scrollbar"]){if(!this[a+"ScrollbarWrapper"]){c=
b.createElement("div");this.options.scrollbarClass?c.className=this.options.scrollbarClass+a.toUpperCase():c.style.cssText="position:absolute;z-index:100;"+(a=="h"?"height:7px;bottom:1px;left:2px;right:7px":"width:7px;bottom:7px;top:2px;right:1px");c.style.cssText+="pointer-events:none;-webkit-transition-property:opacity;-webkit-transition-duration:"+(this.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(this.options.hideScrollbar?"0":"1");this.wrapper.appendChild(c);this[a+"ScrollbarWrapper"]=
c;c=b.createElement("div");if(!this.options.scrollbarClass)c.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);-webkit-background-clip:padding-box;-webkit-box-sizing:border-box;"+(a=="h"?"height:100%;-webkit-border-radius:4px 3px;":"width:100%;-webkit-border-radius:3px 4px;");c.style.cssText+="pointer-events:none;-webkit-transition-property:-webkit-transform;-webkit-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);-webkit-transition-duration:0;-webkit-transform:"+
k+"0,0"+m;this[a+"ScrollbarWrapper"].appendChild(c);this[a+"ScrollbarIndicator"]=c}a=="h"?(this.hScrollbarSize=this.hScrollbarWrapper.clientWidth,this.hScrollbarIndicatorSize=g.max(g.round(this.hScrollbarSize*this.hScrollbarSize/this.scrollerW),8),this.hScrollbarIndicator.style.width=this.hScrollbarIndicatorSize+"px",this.hScrollbarMaxScroll=this.hScrollbarSize-this.hScrollbarIndicatorSize,this.hScrollbarProp=this.hScrollbarMaxScroll/this.maxScrollX):(this.vScrollbarSize=this.vScrollbarWrapper.clientHeight,
this.vScrollbarIndicatorSize=g.max(g.round(this.vScrollbarSize*this.vScrollbarSize/this.scrollerH),8),this.vScrollbarIndicator.style.height=this.vScrollbarIndicatorSize+"px",this.vScrollbarMaxScroll=this.vScrollbarSize-this.vScrollbarIndicatorSize,this.vScrollbarProp=this.vScrollbarMaxScroll/this.maxScrollY);this._indicatorPos(a,!0)}else if(this[a+"ScrollbarWrapper"])this[a+"ScrollbarIndicator"].style.webkitTransform="",this[a+"ScrollbarWrapper"].parentNode.removeChild(this[a+"ScrollbarWrapper"]),
this[a+"ScrollbarWrapper"]=null,this[a+"ScrollbarIndicator"]=null},_resize:function(){var a=this;setTimeout(function(){a.refresh()},0)},_checkSize:function(){var a,b;!this.moved&&!this.zoomed&&this.contentReady&&(a=g.round(this.scroller.offsetWidth*this.scale),b=g.round((this.scroller.offsetHeight-this.offsetBottom-this.offsetTop)*this.scale),a==this.scrollerW&&b==this.scrollerH||this.refresh())},_pos:function(a,b){this.x=this.hScroll?a:0;this.y=this.vScroll?b:0;this.scroller.style.webkitTransform=
k+this.x+"px,"+this.y+"px"+m+" scale("+this.scale+")";this._indicatorPos("h");this._indicatorPos("v")},_indicatorPos:function(a,b){var c=a=="h"?this.x:this.y;if(this[a+"Scrollbar"])c*=this[a+"ScrollbarProp"],c<0?(c=this.options.fixedScrollbar?0:c+c*3,this[a+"ScrollbarIndicatorSize"]+c<9&&(c=-this[a+"ScrollbarIndicatorSize"]+8)):c>this[a+"ScrollbarMaxScroll"]&&(c=this.options.fixedScrollbar?this[a+"ScrollbarMaxScroll"]:c+(c-this[a+"ScrollbarMaxScroll"])*3,this[a+"ScrollbarIndicatorSize"]+this[a+"ScrollbarMaxScroll"]-
c<9&&(c=this[a+"ScrollbarIndicatorSize"]+this[a+"ScrollbarMaxScroll"]-8)),this[a+"ScrollbarWrapper"].style.webkitTransitionDelay="0",this[a+"ScrollbarWrapper"].style.opacity=b&&this.options.hideScrollbar?"0":"1",this[a+"ScrollbarIndicator"].style.webkitTransform=k+(a=="h"?c+"px,0":"0,"+c+"px")+m},_transitionTime:function(a){a+="ms";this.scroller.style.webkitTransitionDuration=a;if(this.hScrollbar)this.hScrollbarIndicator.style.webkitTransitionDuration=a;if(this.vScrollbar)this.vScrollbarIndicator.style.webkitTransitionDuration=
a},_start:function(a){var b=i?a.changedTouches[0]:a,c;this.moved=!1;a.preventDefault();if(i&&a.touches.length==2&&this.options.zoom&&w&&!this.zoomed)this.originX=g.abs(a.touches[0].pageX+a.touches[1].pageX-this.wrapperOffsetLeft*2)/2-this.x,this.originY=g.abs(a.touches[0].pageY+a.touches[1].pageY-this.wrapperOffsetTop*2)/2-this.y;this.moved=!1;this.returnTime=this.dirY=this.dirX=this.absDistY=this.absDistX=this.distY=this.distX=0;this._transitionTime(0);if(this.options.momentum){if(this.scrollInterval)clearInterval(this.scrollInterval),
this.scrollInterval=null;if(this.options.HWCompositing){if(c=new WebKitCSSMatrix(window.getComputedStyle(this.scroller,null).webkitTransform),c.m41!=this.x||c.m42!=this.y)this._unbind("webkitTransitionEnd"),this._pos(c.m41,c.m42)}else if(c=window.getComputedStyle(this.scroller,null),this.x+"px"!=c.left||this.y+"px"!=c.top)this._unbind("webkitTransitionEnd"),this._pos(c.left.replace(/[^0-9]/g)*1,c.top.replace(/[^0-9]/g)*1)}this.scroller.style.webkitTransitionTimingFunction="cubic-bezier(0.33,0.66,0.66,1)";
if(this.hScrollbar)this.hScrollbarIndicator.style.webkitTransitionTimingFunction="cubic-bezier(0.33,0.66,0.66,1)";if(this.vScrollbar)this.vScrollbarIndicator.style.webkitTransitionTimingFunction="cubic-bezier(0.33,0.66,0.66,1)";this.startX=this.x;this.startY=this.y;this.pointX=b.pageX;this.pointY=b.pageY;this.startTime=a.timeStamp;this.options.onScrollStart&&this.options.onScrollStart.call(this);this._bind(o);this._bind(p);this._bind(q)},_move:function(a){if(!(i&&a.touches.length>1)){var b=i?a.changedTouches[0]:
a,c=b.pageX-this.pointX,e=b.pageY-this.pointY,d=this.x+c,f=this.y+e;a.preventDefault();this.pointX=b.pageX;this.pointY=b.pageY;if(d>0||d<this.maxScrollX)d=this.options.bounce?this.x+c/2.4:d>=0||this.maxScrollX>=0?0:this.maxScrollX;if(f>0||f<this.maxScrollY)if(f=this.options.bounce?this.y+e/2.4:f>=0||this.maxScrollY>=0?0:this.maxScrollY,this.options.pullToRefresh&&this.contentReady){if(this.pullDownToRefresh&&f>this.offsetBottom)this.pullDownEl.className="iScrollPullDown flip",this.pullDownLabel.innerText=
this.options.pullDownLabel[1];else if(this.pullDownToRefresh&&this.pullDownEl.className.match("flip"))this.pullDownEl.className="iScrollPullDown",this.pullDownLabel.innerText=this.options.pullDownLabel[0];if(this.pullUpToRefresh&&f<this.maxScrollY-this.offsetTop)this.pullUpEl.className="iScrollPullUp flip",this.pullUpLabel.innerText=this.options.pullUpLabel[1];else if(this.pullUpToRefresh&&this.pullUpEl.className.match("flip"))this.pullUpEl.className="iScrollPullUp",this.pullUpLabel.innerText=this.options.pullUpLabel[0]}if(this.absDistX<
4&&this.absDistY<4)this.distX+=c,this.distY+=e,this.absDistX=g.abs(this.distX),this.absDistY=g.abs(this.distY);else{if(this.options.lockDirection)if(this.absDistX>this.absDistY+3)f=this.y,e=0;else if(this.absDistY>this.absDistX+3)d=this.x,c=0;this.moved=!0;this._pos(d,f);this.dirX=c>0?-1:c<0?1:0;this.dirY=e>0?-1:e<0?1:0;if(a.timeStamp-this.startTime>300)this.startTime=a.timeStamp,this.startX=this.x,this.startY=this.y}}},_end:function(a){if(!(i&&a.touches.length!=0)){var b=this,c=i?a.changedTouches[0]:
a,e,d,f={dist:0,time:0},h={dist:0,time:0},k=a.timeStamp-b.startTime,j=b.x,l=b.y;b._unbind(o);b._unbind(p);b._unbind(q);if(!b.zoomed)if(b.moved){if(b.pullDownToRefresh&&b.contentReady&&b.pullDownEl.className.match("flip"))b.pullDownEl.className="iScrollPullDown loading",b.pullDownLabel.innerText=b.options.pullDownLabel[2],b.scroller.style.marginTop="0",b.offsetBottom=0,b.refresh(),b.contentReady=!1,b.options.onPullDown();if(b.pullUpToRefresh&&b.contentReady&&b.pullUpEl.className.match("flip"))b.pullUpEl.className=
"iScrollPullUp loading",b.pullUpLabel.innerText=b.options.pullUpLabel[2],b.scroller.style.marginBottom="0",b.offsetTop=0,b.refresh(),b.contentReady=!1,b.options.onPullUp();if(k<300&&b.options.momentum){f=j?b._momentum(j-b.startX,k,-b.x,b.scrollerW-b.wrapperW+b.x,b.options.bounce?b.wrapperW:0):f;h=l?b._momentum(l-b.startY,k,-b.y,b.maxScrollY<0?b.scrollerH-b.wrapperH+b.y:0,b.options.bounce?b.wrapperH:0):h;j=b.x+f.dist;l=b.y+h.dist;if(b.x>0&&j>0||b.x<b.maxScrollX&&j<b.maxScrollX)f={dist:0,time:0};if(b.y>
0&&l>0||b.y<b.maxScrollY&&l<b.maxScrollY)h={dist:0,time:0}}if(f.dist||h.dist){f=g.max(g.max(f.time,h.time),10);if(b.options.snap)h=b._snap(j,l),j=h.x,l=h.y,f=g.max(h.time,f);b.scrollTo(j,l,f)}else b.options.snap?(h=b._snap(b.x,b.y),(h.x!=b.x||h.y!=b.y)&&b.scrollTo(h.x,h.y,h.time)):b._resetPos()}else{if(i)b.doubleTapTimer&&b.options.zoom?(clearTimeout(b.doubleTapTimer),b.doubleTapTimer=null,b.zoom(b.pointX,b.pointY,b.scale==1?2:1)):b.doubleTapTimer=setTimeout(function(){b.doubleTapTimer=null;for(e=
c.target;e.nodeType!=1;)e=e.parentNode;d=document.createEvent("MouseEvents");d.initMouseEvent("click",!0,!0,a.view,1,c.screenX,c.screenY,c.clientX,c.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,0,null);d._fake=!0;e.dispatchEvent(d)},b.options.zoom?250:0);b._resetPos()}}},_resetPos:function(a){var b=this.x,c=this.y;if(this.x>=0)b=0;else if(this.x<this.maxScrollX)b=this.maxScrollX;if(this.y>=0||this.maxScrollY>0)c=0;else if(this.y<this.maxScrollY)c=this.maxScrollY;if(b==this.x&&c==this.y){if(this.moved)this.options.onScrollEnd&&
this.options.onScrollEnd.call(this),this.moved=!1;if(this.zoomed)this.options.onZoomEnd&&this.options.onZoomEnd.call(this),this.zoomed=!1;if(this.hScrollbar&&this.options.hideScrollbar)this.hScrollbarWrapper.style.webkitTransitionDelay="300ms",this.hScrollbarWrapper.style.opacity="0";if(this.vScrollbar&&this.options.hideScrollbar)this.vScrollbarWrapper.style.webkitTransitionDelay="300ms",this.vScrollbarWrapper.style.opacity="0"}else{a===void 0&&(a=200);if(a){this.scroller.style.webkitTransitionTimingFunction=
"cubic-bezier(0.33,0.0,0.33,1)";if(this.hScrollbar)this.hScrollbarIndicator.style.webkitTransitionTimingFunction="cubic-bezier(0.33,0.0,0.33,1)";if(this.vScrollbar)this.vScrollbarIndicator.style.webkitTransitionTimingFunction="cubic-bezier(0.33,0.0,0.33,1)"}this.scrollTo(b,c,a)}},_timedScroll:function(a,b,c){var e=this,d=e.x,f=e.y,h=(new Date).getTime(),i;e._transitionTime(0);if(e.scrollInterval)clearInterval(e.scrollInterval),e.scrollInterval=null;e.scrollInterval=setInterval(function(){var j=(new Date).getTime();
j>=h+c?(clearInterval(e.scrollInterval),e.scrollInterval=null,e._pos(a,b),e._transitionEnd()):(j=(j-h)/c-1,i=g.sqrt(1-j*j),j=(a-d)*i+d,e._pos(j,(b-f)*i+f))},20)},_transitionEnd:function(a){a&&a.stopPropagation();this._unbind("webkitTransitionEnd");this._resetPos(this.returnTime);this.returnTime=0},_gestStart:function(){this._transitionTime(0);this.lastScale=1;this.options.onZoomStart&&this.options.onZoomStart.call(this);this._unbind("gesturestart");this._bind("gesturechange");this._bind("gestureend");
this._bind("gesturecancel")},_gestChange:function(a){a=this.scale*a.scale;var b;this.zoomed=!0;if(a<this.options.zoomMin)a=this.options.zoomMin;else if(a>this.options.zoomMax)a=this.options.zoomMax;b=a/this.scale;this.scroller.style.webkitTransform=k+(this.originX-this.originX*b+this.x)+"px,"+(this.originY-this.originY*b+this.y)+"px"+m+" scale("+a+")";this.lastScale=b},_gestEnd:function(){var a=this,b=a.scale,c=a.lastScale;a.scale=b*c;if(a.scale<a.options.zoomMin+0.05)a.scale=a.options.zoomMin;else if(a.scale>
a.options.zoomMax-0.05)a.scale=a.options.zoomMax;c=a.scale/b;a.x=a.originX-a.originX*c+a.x;a.y=a.originY-a.originY*c+a.y;a.scroller.style.webkitTransform=k+a.x+"px,"+a.y+"px"+m+" scale("+a.scale+")";setTimeout(function(){a.refresh()},0);a._bind("gesturestart");a._unbind("gesturechange");a._unbind("gestureend");a._unbind("gesturecancel")},_wheel:function(a){var b=this.x+a.wheelDeltaX/12;a=this.y+a.wheelDeltaY/12;if(b>0)b=0;else if(b<this.maxScrollX)b=this.maxScrollX;if(a>0)a=0;else if(a<this.maxScrollY)a=
this.maxScrollY;this.scrollTo(b,a,0)},_momentum:function(a,b,c,e,d){b=g.abs(a)/b;var f=b*b/0.0012,h=0;h=0;if(a>0&&f>c)h=d/(6/(f/b*6.0E-4)),c+=h,this.returnTime=800/d*h+100,b=b*c/f,f=c;else if(a<0&&f>e)h=d/(6/(f/b*6.0E-4)),e+=h,this.returnTime=800/d*h+100,b=b*e/f,f=e;f*=a<0?-1:1;return{dist:f,time:g.round(b/6.0E-4)}},_offset:function(a,b){var c=-a.offsetLeft,e=-a.offsetTop;if(!b)return{x:c,y:e};for(;a=a.offsetParent;)c-=a.offsetLeft,e-=a.offsetTop;return{x:c,y:e}},_snap:function(a,b){var c,e,d;d=this.pagesX.length-
1;c=0;for(e=this.pagesX.length;c<e;c++)if(a>=this.pagesX[c]){d=c;break}d==this.currPageX&&d>0&&this.dirX<0&&d--;a=this.pagesX[d];e=(e=g.abs(a-this.pagesX[this.currPageX]))?g.abs(this.x-a)/e*500:0;this.currPageX=d;d=this.pagesY.length-1;for(c=0;c<d;c++)if(b>=this.pagesY[c]){d=c;break}d==this.currPageY&&d>0&&this.dirY<0&&d--;b=this.pagesY[d];c=(c=g.abs(b-this.pagesY[this.currPageY]))?g.abs(this.y-b)/c*500:0;this.currPageY=d;d=g.round(g.max(e,c))||200;return{x:a,y:b,time:d}},_bind:function(a,b){(b||
this.scroller).addEventListener(a,this,!1)},_unbind:function(a,b){(b||this.scroller).removeEventListener(a,this,!1)},destroy:function(){this.options.checkDOMChange&&clearTimeout(this.DOMChangeInterval);this.pullDownToRefresh&&this.pullDownEl.parentNode.removeChild(this.pullDownEl);this.pullUpToRefresh&&this.pullUpEl.parentNode.removeChild(this.pullUpEl);this.vScrollbar=this.hScrollbar=!1;this._scrollbar("h");this._scrollbar("v");this.scroller.style.webkitTransform="";this._unbind("webkitTransitionEnd");
this._unbind(s);this._unbind(t);this._unbind(o);this._unbind(p);this._unbind(q);this.options.zoom&&(this._unbind("gesturestart"),this._unbind("gesturechange"),this._unbind("gestureend"),this._unbind("gesturecancel"))},refresh:function(){var a=0,b=0,c,e,d;if(this.pullDownToRefresh)if((c=this.pullDownEl.className.match("loading"))&&!this.contentReady)d=this.scrollerH,this.contentReady=!0,this.pullDownEl.className="iScrollPullDown",this.pullDownLabel.innerText=this.options.pullDownLabel[0],this.offsetBottom=
this.pullDownEl.offsetHeight,this.scroller.style.marginTop=-this.offsetBottom+"px";else if(!c)this.offsetBottom=this.pullDownEl.offsetHeight,this.scroller.style.marginTop=-this.offsetBottom+"px";if(this.pullUpToRefresh)if((c=this.pullUpEl.className.match("loading"))&&!this.contentReady)d=this.scrollerH,this.contentReady=!0,this.pullUpEl.className="iScrollPullUp",this.pullUpLabel.innerText=this.options.pullUpLabel[0],this.offsetTop=this.pullUpEl.offsetHeight,this.scroller.style.marginBottom=-this.offsetTop+
"px";else if(!c)this.offsetTop=this.pullUpEl.offsetHeight,this.scroller.style.marginBottom=-this.offsetTop+"px";this.wrapperW=this.wrapper.clientWidth;this.wrapperH=this.wrapper.clientHeight;this.scrollerW=g.round(this.scroller.offsetWidth*this.scale);this.scrollerH=g.round((this.scroller.offsetHeight-this.offsetBottom-this.offsetTop)*this.scale);this.maxScrollX=this.wrapperW-this.scrollerW;this.maxScrollY=this.wrapperH-this.scrollerH;this.dirY=this.dirX=0;this._transitionTime(0);this.hScroll=this.options.hScroll&&
this.maxScrollX<0;this.vScroll=this.options.vScroll&&(!this.options.bounceLock&&!this.hScroll||this.scrollerH>this.wrapperH);this.hScrollbar=this.hScroll&&this.options.hScrollbar;this.vScrollbar=this.vScroll&&this.options.vScrollbar&&this.scrollerH>this.wrapperH;this._scrollbar("h");this._scrollbar("v");if(typeof this.options.snap=="string"){this.pagesX=[];this.pagesY=[];e=this.scroller.querySelectorAll(this.options.snap);b=0;for(c=e.length;b<c;b++)a=this._offset(e[b]),this.pagesX[b]=a.x<this.maxScrollX?
this.maxScrollX:a.x*this.scale,this.pagesY[b]=a.y<this.maxScrollY?this.maxScrollY:a.y*this.scale}else if(this.options.snap){for(this.pagesX=[];a>=this.maxScrollX;)this.pagesX[b]=a,a-=this.wrapperW,b++;this.maxScrollX%this.wrapperW&&(this.pagesX[this.pagesX.length]=this.maxScrollX-this.pagesX[this.pagesX.length-1]+this.pagesX[this.pagesX.length-1]);b=a=0;for(this.pagesY=[];a>=this.maxScrollY;)this.pagesY[b]=a,a-=this.wrapperH,b++;this.maxScrollY%this.wrapperH&&(this.pagesY[this.pagesY.length]=this.maxScrollY-
this.pagesY[this.pagesY.length-1]+this.pagesY[this.pagesY.length-1])}if(this.options.zoom)a=this._offset(this.wrapper,!0),this.wrapperOffsetLeft=-a.x,this.wrapperOffsetTop=-a.y;d&&this.y==0&&(d=d-this.scrollerH+this.y,this.scrollTo(0,d,0));this._resetPos()},scrollTo:function(a,b,c,e){var d=this;e&&(a=d.x-a,b=d.y-b);c=!c||g.round(d.x)==g.round(a)&&g.round(d.y)==g.round(b)?0:c;d.moved=!0;d.options.HWTransition?(c&&d._bind("webkitTransitionEnd"),d._transitionTime(c),d._pos(a,b),c||setTimeout(function(){d._transitionEnd()},
0)):d._timedScroll(a,b,c)},scrollToElement:function(a,b){var c;if(a=a.nodeType?a:this.scroller.querySelector(a))c=this._offset(a),c.x=c.x>0?0:c.x<this.maxScrollX?this.maxScrollX:c.x,c.y=c.y>0?0:c.y<this.maxScrollY?this.maxScrollY:c.y,b=b===void 0?g.max(g.abs(c.x)*2,g.abs(c.y)*2):b,this.scrollTo(c.x,c.y,b)},scrollToPage:function(a,b,c){if(this.options.snap)a=a=="next"?this.currPageX+1:a=="prev"?this.currPageX-1:a,b=b=="next"?this.currPageY+1:b=="prev"?this.currPageY-1:b,a=a<0?0:a>this.pagesX.length-
1?this.pagesX.length-1:a,b=b<0?0:b>this.pagesY.length-1?this.pagesY.length-1:b,this.currPageX=a,this.currPageY=b,a=this.pagesX[a],b=this.pagesY[b];else{a*=-this.wrapperW;b*=-this.wrapperH;if(a<this.maxScrollX)a=this.maxScrollX;if(b<this.maxScrollY)b=this.maxScrollY}this.scrollTo(a,b,c||400)},zoom:function(a,b,c){var e=this,d=c/e.scale;a=a-e.wrapperOffsetLeft-e.x;b=b-e.wrapperOffsetTop-e.y;e.x=a-a*d+e.x;e.y=b-b*d+e.y;e.scale=c;e.options.onZoomStart&&e.options.onZoomStart.call(e);e.refresh();e._bind("webkitTransitionEnd");
e._transitionTime(200);setTimeout(function(){e.zoomed=!0;e.scroller.style.webkitTransform=k+e.x+"px,"+e.y+"px"+m+" scale("+c+")"},0)}};var n="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,i="ontouchstart"in window,w="ongesturestart"in window,v="WebKitTransitionEvent"in window,u=/iphone|ipad/gi.test(navigator.appVersion),x=/android/gi.test(navigator.appVersion),s="onorientationchange"in window?"orientationchange":"resize",t=i?"touchstart":"mousedown",o=i?"touchmove":"mousemove",p=i?"touchend":
"mouseup",q=i?"touchcancel":"mouseup",k="translate"+(n?"3d(":"("),m=n?",0)":")",g=Math;typeof exports!=="undefined"?exports.iScroll=r:window.iScroll=r})();